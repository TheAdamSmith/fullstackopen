{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","catch","error","console","log","response","then","data","newObject","post","delete","id","put","Filter","filter","onChange","value","PersonForm","props","newName","newNumber","onNameChange","onNumChange","onSubmit","type","Persons","persons","onClick","person","Name","startsWith","map","key","Number","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setnewFilter","notification","setNotification","setError","useEffect","personService","initialPersons","event","preventDefault","target","ids","nameList","personObject","includes","indexOf","returnedPerson","err","setTimeout","sort","reduce","newId","concat","window","confirm","personIter","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8f76c008.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () =>  {\n\n    const request = axios\n        .get(baseUrl)\n        .catch(error => console.log(error.response))\n    return request.then(response => response.data)\n}\n\nconst create = newObject =>  {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response =>response.data)\n}\n\nconst remove = newObject => {\n    const request = axios.delete(`${baseUrl}/${newObject.id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = newObject => {\n    const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\n    return request.then(response => response.data)\n}\nexport default {getAll, create, remove, update}","import React from 'react'\n\nconst Filter = ({filter,  onChange})  => {\n \n    return (\n       <form>\n           <div>\n             filter shown with:<input\n                                 value={filter}\n                                 onChange={onChange}/>\n           </div>\n       </form>\n     )\n  }\n   \n  \n  \n  export default Filter","import React from 'react'\n\nconst PersonForm = (props)  => {\n    \n    const {newName, newNumber, onNameChange, onNumChange, onSubmit} = props\n    return (\n      <form onSubmit={onSubmit}>\n          <div>\n            name: <input \n                    value={newName}\n                    onChange={onNameChange} />\n          </div>\n          <div>\n            number: <input \n                      value={newNumber}\n                      onChange={onNumChange}/>\n          </div>\n          <div>\n            <button type=\"submit\">add</button>\n          </div>\n        </form>\n    )\n  }\n\n  export default PersonForm","import React from 'react'\n\nconst Persons = ({persons, filter, onClick}) => {\n\n    const filtPersons = persons.filter(person => person.Name.startsWith(filter))\n\n    return (\n        filtPersons.map(person => \n        <p key={person.Name}> {person.Name} {person.Number}\n        <button key={person.Name} onClick={() => onClick(person)}>delete</button>\n        </p>)\n    )\n}\n\nexport default Persons","import React from 'react'\n\nconst Notification = ({ message, error }) => {\n    \n   if(error){\n    return (\n        <div className=\"error\">\n        {error}\n        </div>\n    )\n  }\n  if(message){\n    return (\n        <div className=\"notification\">\n        {message}\n        </div>\n    )\n  }\n  return null\n}\n\nexport default Notification","import React, { useState, useEffect} from 'react'\n\nimport personService from './services/persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport './index.css'\n\nconst generateId = (ids) => {\n  ids.sort()\n  return (\n    ids.reduce(function(newId, id) {\n      return newId===id? id+1:newId\n    }, 1)\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ filter, setnewFilter] = useState('')\n  const [notification, setNotification] = useState(null) \n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n   personService\n    .getAll() \n    .then(initialPersons =>{\n      setPersons(initialPersons)}\n      )\n  }, [])\n\n  const addName=(event) => {\n    event.preventDefault()\n    const nameList = persons.map(person => person.Name)\n    const personObject = {\n      Name: newName,\n      Number: newNumber,\n      id:0,\n    }\n\n    if (nameList.includes(newName)){\n\n      personObject.id = persons[nameList.indexOf(newName)].id\n      personService\n        .update(personObject)\n        .then(returnedPerson =>{\n          setPersons(persons.map(person => person.Name ===returnedPerson.Name ? returnedPerson: person))\n        })\n        .catch(err => {\n          setError(`Information of ${personObject.Name} has been removed  from server.\n                    Or the name was less than 5 chars or number less than 8`)\n          setTimeout(() => {\n            setError(null)\n          }, 5000)\n        })\n      \n    } else{\n      personObject.id = generateId(persons.map(person=>person.id))\n\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewNumber('')\n          setNewName('')\n          setNotification('Added '+ personObject.Name)\n          setTimeout(()=>{\n            setNotification(null)\n          }, 5000)\n        }) \n        .catch(err => {\n          console.log(err.response.data);\n          setError(err.response.data.error)\n          setTimeout(()=>{\n            setError(null)\n          }, 5000)\n        })\n    }\n  \n      \n  }\n\n  const handleNameChange = (event) => { \n    event.preventDefault()\n    setNewName(event.target.value)\n  }\n\n  const handleNumChange = (event) => { \n    event.preventDefault()\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => { \n    event.preventDefault()\n    setnewFilter(event.target.value)\n  }\n\n  const handleDelete = (person) => {\n    if(window.confirm('Delete '+person.Name+'?')){\n      personService\n        .remove(person)\n        .then()\n        .catch(\n          error => {\n            setError(`Information of ${person.Name} has been removed  from server`)\n            setTimeout(() => {\n              setError(null)\n            }, 5000)\n          }\n        )\n      setPersons(persons.filter(personIter => personIter !==person ))\n    }\n  }\n \n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} error={error} />\n      <Filter filter={filter} onChange={handleFilterChange}/> \n\n      <h3>add a new</h3>\n\n      <PersonForm newName={newName} newNumber={newNumber}\n                  onNameChange={handleNameChange} onNumChange={handleNumChange} \n                  onSubmit={addName}/>\n    \n      <h3>Numbers</h3>\n\n      <Persons persons={persons} filter={filter} onClick={handleDelete}/>\n      \n    </div>\n  )\n}\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\n\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}